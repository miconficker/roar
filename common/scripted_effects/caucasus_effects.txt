baghuashi_exiled_effect = {
	title:k_abkhazia = {
		holder = {
			get_title = title:c_argveti
		}
	}
}
baghuashi_in_kidekari_effect = {
	title:k_iberia = {
		holder = {
			get_title = title:c_samtskhe
			get_title = title:c_artaani
		}
	}
	character:sea_baghuashi_1 = {
		get_title = title:d_kidekari
		get_title = title:c_trialeti
		get_title = title:c_javakheti	
	}
	character:160032 = {
		set_employer = character:70460
	}
	character:160033 = {
		set_employer = character:70475
	}
}

grigor_hamam_effect = {
	character:159982 = {
		get_title = title:c_gardman
		get_title = title:c_parnes
	}
	character:sea_arranshahik_002 = {
		get_title = title:c_khachen
		get_title = title:c_vaykunik
	}
	character:sea_arranshahik_003 = {
		get_title = title:c_hereti
		get_title = title:c_khornabuji
		get_title = title:c_kambysene
		get_title = title:c_shaki
	}
	character:sea_arranshahik_004 = {
		get_title = title:c_harchlank
	}
}

restore_ani_cathedral_effect = {
	trigger_event = caucasianroa.032
}

caucasus_build_tower_effect = {
	add_prestige = medium_prestige_gain
	add_piety = minor_piety_gain
	capital_county = {
		add_county_modifier = {
			modifier = caucasus_vainakh_tower_modifier
		}
	}
}


### DECISIONS ###
form_georgia_decision_effect = {
	custom_tooltip = georgia_de_jure_tt

	create_title_and_vassal_change = {
		type = created
		save_scope_as = title_change
		add_claim_on_loss = no
	}
	title:k_georgia = {
		change_title_holder = {
			holder = ROOT
			change = scope:title_change
		}
	}

	if = {
		limit = {
			primary_title = title:k_abkhazia
		}
		title:k_georgia = { set_variable = k_georgia_abkhazia }
	}
	else_if = {
		limit = {
			primary_title = title:k_iberia
		}
		title:k_georgia = { set_variable = k_georgia_iberia }
	}
	else_if = {
		limit = {
			primary_title = title:k_kakheti
		}
		title:k_georgia = { set_variable = k_georgia_kakheti }
	}

	resolve_title_and_vassal_change = scope:title_change
	set_primary_title_to = title:k_georgia

	title:k_abkhazia = { add_to_list = georgian_kingdoms }
	title:k_iberia = { add_to_list = georgian_kingdoms }
	title:k_kakheti = { add_to_list = georgian_kingdoms }

	hidden_effect = {
		every_in_list = {
			list = georgian_kingdoms
			limit = { holder = ROOT }
			every_in_de_jure_hierarchy = {
				limit = {
					tier = tier_duchy
				}
				set_de_jure_liege_title = title:k_georgia
			}
			if = {
				limit = { exists = yes }
				scope:founder = {destroy_title = PREV}
			}
		}

	}
}

unify_armenian_principalities_decision_effect = {
	title:k_vaspurakan = { add_to_list = armenian_princedoms }
	title:k_ayrarat = { add_to_list = armenian_princedoms }
	title:k_syunik = { add_to_list = armenian_princedoms }

	if = {
		limit = { NOT = { has_title = title:k_armenian_principality } }

		create_title_and_vassal_change = {
			type = created
			save_scope_as = title_change
			add_claim_on_loss = no
		}
		title:k_armenian_principality = {
			change_title_holder = {
				holder = root
				change = scope:title_change
			}
		}
		resolve_title_and_vassal_change = scope:title_change
		set_primary_title_to = title:k_armenian_principality
	}
	title:k_vaspurakan = {
		custom_tooltip = {
			text = drift_into_principalities_tt
			every_in_de_jure_hierarchy = {
				limit = { tier = tier_duchy }
				set_de_jure_liege_title = title:k_armenian_principality
			}
			PREV = { destroy_title = title:k_vaspurakan }
		}
	}
	title:k_ayrarat = {
		custom_tooltip = {
			text = drift_into_principalities_tt
			every_in_de_jure_hierarchy = {
				limit = { tier = tier_duchy }
				set_de_jure_liege_title = title:k_armenian_principality
			}
			PREV = { destroy_title = title:k_ayrarat }
		}
	}

	if = {
		limit = {
			OR = {
				has_title = title:k_syunik
				completely_controls = title:k_syunik
			}
		}
		title:k_syunik = {
			custom_tooltip = {
				text = drift_into_principalities_tt
				every_in_de_jure_hierarchy = {
					limit = { tier = tier_duchy }
					set_de_jure_liege_title = title:k_armenian_principality
				}
			}
			PREV = { destroy_title = title:k_syunik }
		}
	}
}

greater_abazinia_effect = {
    create_title_and_vassal_change = {
        type = created
        save_scope_as = title_change
        add_claim_on_loss = no
    }
	title:d_greater_abazinia = {
		change_title_holder = {
			holder = ROOT
			change = scope:title_change
		}
	}	
    resolve_title_and_vassal_change = scope:title_change
    set_primary_title_to = title:d_greater_abazinia
}

align_circassian_church_decision_effect = {
	faith:circassian_christianity = {
		if = {
			limit = { ROOT = {is_ai = yes} }
			random_list = {
				10 = {
					modifier = {
						add = 20
						prev = {
							opinion = {
								target = title:k_orthodox.holder
								value >= 50
							}
						}
					}
					trigger = {
						NOT = { religious_head_title = title:k_orthodox }
						exists = title:k_orthodox.holder
					}
					set_religious_head_title = title:k_orthodox
				}
				10 = {
					modifier = {
						add = 20
						prev = {
							opinion = {
								target = title:d_iconoclast.holder
								value >= 50
							}
						}
					}
					trigger = {
						NOT = { religious_head_title = title:d_iconoclast }
						exists = title:d_iconoclast.holder
					}
					set_religious_head_title = title:d_iconoclast
				}
				10 = {
					modifier = {
						add = 20
						prev = {
							opinion = {
								target = title:k_papal_state.holder
								value >= 50
							}
						}
					}
					trigger = {
						NOT = { religious_head_title = title:k_papal_state }
						exists = title:k_papal_state.holder
					}
					set_religious_head_title = title:k_papal_state
				}
				10 = {
					modifier = {
						add = 20
						prev = {
							opinion = {
								target = title:d_georgian_patriarchate.holder
								value >= 50
							}
						}
					}
					trigger = {
						NOT = { religious_head_title = title:d_georgian_patriarchate }
						exists = title:d_georgian_patriarchate.holder
					}
					set_religious_head_title = title:d_georgian_patriarchate
				}
				10 = {
					modifier = {
						add = 20
						prev = {
							opinion = {
								target = title:d_apostolic_church.holder
								value >= 50
							}
						}
					}
					trigger = {
						NOT = { religious_head_title = title:d_apostolic_church }
						exists = title:d_apostolic_church.holder
					}
					set_religious_head_title = title:d_apostolic_church
				}
				10 = {
					modifier = {
						add = 20
						prev = {
							OR = {
								has_trait = arrogant
								has_trait = ambitious
								has_trait = cynical
							}
						}
					}
					trigger = {
						NOT = { religious_head_title = title:d_circassian_patriarchate }
						NOT = { exists = title:d_circassian_patriarchate.holder }
					}
					set_religious_head_title = title:d_circassian_patriarchate
					ROOT = { create_circassian_patriarchate_effect = yes }
				}
			}
		}
		else_if = {
			limit = {
				scope:align_orthodox = yes
			}
			set_religious_head_title = title:k_orthodox
		}
		else_if = {
			limit = {
				scope:align_iconoclast = yes
			}
			set_religious_head_title = title:d_iconoclast
		}
		else_if = {
			limit = {
				scope:align_catholic = yes
			}
			set_religious_head_title = title:k_papal_state
		}
		else_if = {
			limit = {
				scope:align_georgian_orthodox = yes
			}
			set_religious_head_title = title:d_georgian_patriarchate
		}
		else_if = {
			limit = {
				scope:align_armenian_apostolic = yes
			}
			set_religious_head_title = title:d_apostolic_church
		}
		else_if = {
			limit = {
				scope:align_independent = yes
			}
			set_religious_head_title = title:d_circassian_patriarchate
			ROOT = { create_circassian_patriarchate_effect = yes }
		}
	}
	if = {
		limit = { NOT = { faith:circassian_christianity = { religious_head_title = title:d_circassian_patriarchate } } }
		destroy_title = title:d_circassian_patriarchate
	}
}

create_circassian_patriarchate_effect = {
	hidden_effect = {
		create_character = {
			employer = root
			template = religious_leader_character
			random_traits = no
			save_scope_as = new_pope
			dynasty = generate
		}
		scope:new_pope = {
			add_trait = education_learning_3
			add_trait = zealous
			add_trait = intellect_good_1
			random_list = {
				1 = { add_trait = lustful }
				1 = { add_trait = chaste }
				1 = { add_trait = wrathful }
				1 = { add_trait = diligent }
				1 = { add_trait = impatient }
				1 = { add_trait = arrogant }
				1 = { add_trait = humble }
				1 = { add_trait = gregarious }
			}
			random_list = {
				1 = { add_trait = honest }
				1 = { add_trait = ambitious }
				1 = { add_trait = just }
				1 = { add_trait = cynical }
				1 = { add_trait = zealous }
				1 = { add_trait = compassionate }
				1 = { add_trait = stubborn }
			}
		}
		create_title_and_vassal_change = {
			type = returned
			save_scope_as = change
			add_claim_on_loss = no
		}
		title:d_circassian_patriarchate = {
			change_title_holder = {
				holder = scope:new_pope
				change = scope:change
			}
		}
		resolve_title_and_vassal_change = scope:change
	}
}
